# AI Payphone Configuration
# Copy this to .env and customize
# Model recommendations updated January 2026

# Debug mode
DEBUG=false
LOG_LEVEL=INFO

# AudioSocket Server
AUDIO_AUDIOSOCKET_HOST=0.0.0.0
AUDIO_AUDIOSOCKET_PORT=9092

# Speech-to-Text
# Backend: "hailo" (most accurate), "moonshine", "whisper", or "auto" (tries all)
# Auto mode tries: hailo/wyoming -> moonshine -> faster-whisper
STT_BACKEND=auto
# Wyoming/Hailo settings (primary - most accurate on telephone audio)
STT_WYOMING_HOST=localhost
STT_WYOMING_PORT=10300
# Moonshine settings (CPU fallback - 5x faster than Whisper tiny)
STT_MOONSHINE_MODEL=UsefulSensors/moonshine-tiny
# faster-whisper settings (CPU last resort)
# Speed: tiny (~0.7-1.2s latency), Quality: large-v3-turbo, Balanced: base
STT_WHISPER_MODEL=tiny
STT_COMPUTE_TYPE=int8
STT_LANGUAGE=en

# Language Model (Ollama on Pi #2)
# For dual-Pi setup: LLM_HOST=http://10.10.10.11:11434
# Recommended models:
#   - Recommended: qwen3:4b-instruct (~4-5 TPS, best balance)
#   - Fallback: llama3.2:3b (~5-6 TPS, good latency)
#   - Quality: ministral:8b (~2-3 TPS, best conversational)
LLM_HOST=http://10.10.10.11:11434
LLM_MODEL=qwen3:4b-instruct
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=150
LLM_TIMEOUT=10.0
# Streaming: overlap LLM generation with TTS for lower perceived latency
# Set to false to use sequential generate-then-speak path
LLM_STREAMING_ENABLED=true

# Text-to-Speech (Kokoro-82M)
# Mode: "local" (default) or "remote" (offload to Pi #2)
# Kokoro remains gold standard for edge TTS (Jan 2026)
TTS_MODE=local
# Remote TTS server (when mode=remote)
# Run tts_server.py on Pi #2: python tts_server.py
TTS_REMOTE_HOST=http://10.10.10.11:10200
TTS_REMOTE_TIMEOUT=10.0
# Kokoro model settings (for local mode or remote server)
# Use quantized models for better performance:
#   - kokoro-v1.0.onnx (default, FP32)
#   - kokoro-v1.0-int8.onnx (2x faster)
TTS_MODEL_PATH=kokoro-v1.0.onnx
TTS_VOICES_PATH=voices-v1.0.bin
TTS_VOICE=af_bella
TTS_SPEED=1.0

# Voice Activity Detection (Silero VAD v5, v6.2 recommended upgrade)
# Optimized for telephony audio (8kHz)
VAD_THRESHOLD=0.5
VAD_MIN_SPEECH_DURATION_MS=250
VAD_MIN_SILENCE_DURATION_MS=800
VAD_SPEECH_PAD_MS=300

# Timeouts
TIMEOUT_SILENCE_PROMPT=10
TIMEOUT_SILENCE_GOODBYE=30
TIMEOUT_MAX_CALL_DURATION=1800
